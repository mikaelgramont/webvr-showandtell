<!DOCTYPE html>
<html>
<head>
	<title>SVG to Canvas</title>
	<style>
		body, .svg-container, .svg-content {
			font-family: monospace;
			margin: 10px;
			background: #ddd;
		}
		img {
			border: 1px solid red;
		}
		canvas {
			outline: 1px solid black;
		}
		.svg-container {
			display: none;
		}
	</style>
</head>
<body>
	<img width="200" height="200" alt="" />
	<canvas width="200" height="200"></canvas>
	<div class="svg-container">
		<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">
			<foreignObject class="svg-content" width="100%" height="100%">
				<div xmlns="http://www.w3.org/1999/xhtml" style="font-size:40px; font-family: monospace">
					<em>I</em> like <span style="color:white; text-shadow:0 0 2px blue;"> cheese</span>
	           </div>
           </foreignObject>
		</svg>
	</div>
	<h1>Notes</h1>
	<pre>
It seems font styles need to be applied inline on the svg element in order to be picked up.
Maybe grab the svg from the DOM, make that a static string.
Then for each step, grab the content of the step from the dom, place it inside a copy of that static string, and generate a Blob based on that.
Then generate a hidden image for the step right before rendering it.
	</pre>
</body>
<script>
	var DOMURL = window.URL || window.webkitURL || window;

	var canvas = document.getElementsByTagName('canvas')[0];
	var ctx = canvas.getContext('2d');
	var data = document.getElementsByClassName('svg-container')[0].innerHTML;
	var img = document.getElementsByTagName('img')[0];
	var svg = new Blob([data], {type: 'image/svg+xml;charset=utf-8'});
	var url = DOMURL.createObjectURL(svg);

	img.onload = function () {
	  ctx.drawImage(img, 0, 0);
	  DOMURL.revokeObjectURL(url);
	}

	img.src = url;	
</script>
</html>